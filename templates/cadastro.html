<!DOCTYPE html>
<html lang="pt-br">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
        <link rel="stylesheet" href="{{ url_for('static', filename='cadastro.css') }}">
        <title>Cadastro</title>
    </head>
    <body>
    <nav>
        <ul>
            <li><a href="{{ url_for('index') }}">Voltar</a></li>
            <li><a href="{{ url_for('logout') }}">Sair</a></li>
        </ul>
    </nav>
        <div class="form-container">
            {% if erro %}
                <p style="color: red;">{{ erro }}</p>
            {% endif %}
        {% if tipo == "profissional" %}
        <h1>Cadastrar Profissional</h1>
            <form method="post">
                <label for="nome">Nome:</label>
                <input type="text" id="nome" name="nome" required><br>

                <label for="email">E-mail:</label>
                <input type="email" id="email" name="email" required><br>

                <label for="cargo">Cargo:</label>
                <label for="medico">Médico</label>
                <input type="radio" id="medico" name="cargo" value="Médico" required>
                <label for="enfermeiro">Enfermeiro</label>
                <input type="radio" id="enfermeiro" name="cargo" value="Enfermeiro" required>
                <label for="tecnico">Técnico</label>
                <input type="radio" id="tecnico" name="cargo" value="Técnico" required>
                <label for="cpf">CPF:</label>
                <input type="text" id="cpf" name="cpf" required><br>

                <label for="registro">Registro Profissional:</label>
                <input type="text" id="registro" name="registro" required><br>

                <label for="telefone">Telefone:</label>
                <input type="text" id="telefone" name="telefone" required><br>

                <label for="data_nascimento">Data de Nascimento:</label>
                <input type="date" id="data_nascimento" name="data_nascimento" required><br>

                <button type="submit">Cadastrar Profissional</button>
            </form>
        {% elif tipo == "paciente" %}
        <h1>Cadastrar Paciente</h1>
            <form method="post">
                <label for="nome">Nome:</label>
                <input type="text" id="nome" name="nome" required><br>

                <label for="data_nascimento">Data de Nascimento:</label>
                <input type="date" id="data_nascimento" name="data_nascimento" required><br>

                <label for="endereco">Endereço:</label>
                <input type="text" id="endereco" name="endereco" required><br>

                <label for="telefone">Telefone:</label>
                <input type="text" id="telefone" name="telefone" required><br>

                <label for="email">E-mail:</label>
                <input type="email" id="email" name="email" required><br>

                <label for="cpf">CPF:</label>
                <input type="text" id="cpf" name="cpf" required><br>

                <button type="submit">Cadastrar Paciente</button>
            </form>
        {% elif tipo == "unidade" %}
        <h1>Cadastrar Unidade</h1>
            <form method="post">
                <label for="nome">Nome:</label>
                <input type="text" id="nome" name="nome" required><br>

                <label for="endereco">Endereço</label>
                <input type="text" id="endereco" name="endereco" required><br>

                <label for="tipo">Tipo de Unidade</label>
                <label for="hospital">Hospital</label>
                <input type="radio" id="hospital" name="tipo" value="Hospital" required>
                <label for="clinica">Clinica</label>
                <input type="radio" id="clinica" name="tipo" value="Clinica" required>
                <label for="teste">Teste</label>
                <input type="radio" id="teste" name="tipo" value="Teste" required><br>

                <button type="submit">Cadastrar Unidade</button>
            </form>
        {% elif tipo == "leito" %}
        <h1>Cadastrar Leito</h1>
            <form method="post">
                <label for="numero">Número do Leito:</label>
                <input type="text" id="numero" name="numero" required><br>

                <label for="unidadeId">Unidade:</label>
                <input type="text" id="buscaUnidade" placeholder="Buscar por nome..." onkeyup="filtrarUnidades()">
                <select id="idUnidade" name="idUnidade" required>
                    {% for unidade in locais %}
                        <option value="{{ unidade['id'] }}">{{ unidade.nome }}</option>
                    {% endfor %}
                </select><br>
                <script>
                function filtrarUnidades() {
                    var input = document.getElementById('buscaUnidade').value.toLowerCase();
                    var select = document.getElementById('unidadeId');
                    for (var i = 0; i < select.options.length; i++) {
                        var nome = select.options[i].text.toLowerCase();
                        if (nome.includes(input)) {
                            select.options[i].style.display = '';
                        } else {
                            select.options[i].style.display = 'none';
                        }
                    }
                }
                </script>
                <label for="tipo">Tipo de Leito:</label>
                <select id="tipo" name="tipo" required>
                    <option value="Enfermaria">Enfermaria</option>
                    <option value="UTI">UTI</option>
                </select><br>

                <button type="submit">Cadastrar Leito</button>
            </form>
        {% elif tipo == "usuario" %}
        <h1>Cadastrar Usuário</h1>
            <form method="post">
                <label for="nome">Nome de Usuário:</label>
                <input type="text" id="nome" name="nome" required><br>

                <label for="senha">Senha:</label>
                <input type="password" id="senha" name="senha" required><br>

                <label for="email">E-mail:</label>
                <input type="email" id="email" name="email" required><br>

                <label for="admin">Administrador:</label>
                <input type="checkbox" id="admin" name="admin" value="1"><br>

                <button type="submit">Cadastrar Usuário</button>
            </form>
        {% else %}
            <p>Tipo de cadastro inválido.</p>
        {% endif %}
        </div>
    </body>
</html>